{"mappings":"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","sources":["src/index.js","src/js/search.js","src/js/filter.js"],"sourcesContent":["// import './js/fetchUrl';\nimport {\n  requestData,\n  requestTypes,\n  getServerData,\n  getNextServerData,\n  renderMoviesMarkup,\n} from './js/fetchUrl';\nimport './js/firebase';\nimport './js/search';\nimport './js/select';\nimport './js/filter';\nimport './js/restore';\nimport { fillGenresFiltr } from './js/filter';\nimport './js/gallery-card-modal';\nimport { save, load } from './js/localstorage';\nimport './js/localstorage';\nimport './js/spinner';\nimport './js/modal-teem';\nimport './js/switcherTheme';\nimport './js/button-up';\nimport { Pagination } from './js/pagination';\nimport { saveConfig } from './js/restore';\nimport './js/errorMessage';\nimport { setErrorMessage } from './js/errorMessage';\n\nconst PaginationInstnce = new Pagination(\n  document.getElementById('pagination'),\n  {\n    countPoint: 5,\n    totalPages: 10,\n    onShow: paginationOnClick,\n  }\n);\n\nfunction paginationOnClick(pageNumber) {\n  requestData.page = pageNumber;\n  getNextServerData().then(movies => {\n    renderMoviesMarkup(movies);\n  });\n}\n\ngetServerData(requestTypes.GENRE)\n  .then(data => {\n    requestData.genres = data.genres;\n    fillGenresFiltr('filter-genres');\n  })\n  .then(() => {\n    let config = load('config');\n    if (config) {\n      requestData.page = config.requestData.page;\n      requestData.request = config.requestData.request;\n      requestData.discover = config.requestData.discover;\n      requestData.id = config.requestData.id;\n      requestData.search = config.requestData.search;\n      requestData.movies = config.requestData.movies;\n      requestData.genres = config.requestData.genres;\n      requestData.movie = config.requestData.movie;\n      requestData.videos = config.requestData.videos;\n\n      PaginationInstnce.currentPage = requestData.page;\n      getNextServerData()\n        .then(movies => {\n          PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n          renderMoviesMarkup(movies);\n        })\n        .catch(error => setErrorMessage(error.message));\n    } else {\n      requestData.page = 1;\n      getServerData(requestTypes.TRENDING)\n        .then(movies => {\n          requestData.movies = movies;\n          PaginationInstnce.currentPage = 1;\n          PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n          saveConfig();\n          renderMoviesMarkup(movies);\n        })\n        .catch(error => setErrorMessage(error.message));\n    }\n  })\n  .catch(error => setErrorMessage(error.message));\n\nexport { PaginationInstnce };\n","import {\n  requestData,\n  requestTypes,\n  getServerData,\n  getNextServerData,\n  renderMoviesMarkup,\n} from './fetchUrl';\n\nimport { spinnerOn, spinnerOff } from './spinner';\nimport { fillGenresFiltr } from './filter';\nimport { PaginationInstnce } from '../index';\nimport { setErrorMessage } from './errorMessage';\n\nconst searchBtn = document.querySelector('.header__form-button');\nconst searchInput = document.querySelector('.header__form-input');\nconst headerSearchError = document.querySelector('.header__text-warning');\n\nsearchBtn.addEventListener('click', onBtnSearcClick);\n\nfunction onBtnSearcClick(e) {\n  e.preventDefault();\n  if (searchInput.value !== '' && searchInput.value !== ' ') {\n    requestData.search = `${searchInput.value}`;\n    requestData.page = 1;\n    getServerData(requestTypes.SEARCH)\n      .then(movies => {\n        spinnerOn();\n        PaginationInstnce.currentPage = 1;\n        PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n\n        renderMoviesMarkup(movies);\n        searchInput.value = '';\n      })\n      .catch(error => setErrorMessage(error.message));\n  }\n}\n","import {\n  requestData,\n  requestTypes,\n  getServerData,\n  getNextServerData,\n  renderMoviesMarkup,\n} from './fetchUrl';\n\nimport {\n  createCustomOneSelect,\n  setOption,\n  getOption,\n  getOptionNum,\n  createCustomMultiSelect,\n  getMultiOption,\n  setMultiOption,\n} from './select.js';\n\nimport { classGenres, classYears } from './restore';\n\nimport { PaginationInstnce } from '../index';\nimport { setErrorMessage } from './errorMessage';\n\nexport function fillGenresFiltr(classSelect) {\n  const markup = markupFilterGenres();\n  const select = document.querySelector(`.custom-multi-select.${classSelect}`);\n  select.innerHTML = markup;\n  createCustomMultiSelect();\n  createCustomOneSelect();\n}\n\nfunction markupFilterGenres() {\n  let markup =\n    '<select><option value=\"Genres\">Genres</option><option value=\"None\">None</option>';\n  markup += requestData.genres\n    .map(({ id, name }) => `<option value=\"${id}\">${name}</option>`)\n    .join('');\n  markup += '</select>';\n  return markup;\n}\n\nconst filterBtnUse = document.querySelector('.filter-btn-use');\nfilterBtnUse.addEventListener('click', function (e) {\n  requestData.idxYears = getOptionNum('filter-years');\n  const filterYears = getOption('filter-years');\n  requestData.valuesGenres = getMultiOption('filter-genres');\n  requestData.page = 1;\n  requestData.discover = '';\n  if (requestData.valuesGenres.length) {\n    requestData.discover = `&with_genres=${requestData.valuesGenres}`;\n  }\n  requestData.discover += filterYears;\n  if (requestData.discover) {\n    getServerData(requestTypes.DISCOVER)\n      .then(movies => {\n        PaginationInstnce.currentPage = 1;\n        PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n        renderMoviesMarkup(movies);\n      })\n      .catch(error => setErrorMessage(error.message));\n  } else {\n    getServerData(requestTypes.TRENDING)\n      .then(movies => {\n        PaginationInstnce.currentPage = 1;\n        PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n        renderMoviesMarkup(movies);\n      })\n      .catch(error => setErrorMessage(error.message));\n  }\n});\n\nconst filterBtnReset = document.querySelector('.filter-btn-reset');\nfilterBtnReset.addEventListener('click', function (e) {\n  setOption(classYears, 0);\n  setMultiOption(classGenres, '');\n  requestTypes.page = 1;\n  getServerData(requestTypes.TRENDING)\n    .then(movies => {\n      PaginationInstnce.currentPage = 1;\n      PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n      renderMoviesMarkup(movies);\n    })\n    .catch(error => setErrorMessage(error.message));\n});\n\nconst filterNavBtn = document.querySelector(\n  '.header__navigation-button-filter'\n);\nfilterNavBtn.addEventListener('click', function (e) {\n  const filterContainer = document.querySelector('.filter__container');\n  filterContainer.classList.toggle('visually-hidden');\n});\n"],"names":["$lkfBv","parcelRequire","$cc8167df025acb14$export$c2088fd8b3d8e2d2","classSelect","markup","requestData","genres","map","id","name","join","$cc8167df025acb14$var$markupFilterGenres","document","querySelector","innerHTML","$7iYtU","createCustomMultiSelect","createCustomOneSelect","addEventListener","e","idxYears","getOptionNum","filterYears","getOption","valuesGenres","getMultiOption","page","discover","length","getServerData","requestTypes","DISCOVER","then","movies","$1f0dc3b9307be026$export$3987d669b8c45b1f","currentPage","setTotalPages","Math","min","total_pages","renderMoviesMarkup","catch","error","$43jeg","setErrorMessage","message","TRENDING","setOption","$5A2tN","classYears","setMultiOption","classGenres","classList","toggle","$b18fd23e9761f35d$var$searchBtn","$b18fd23e9761f35d$var$searchInput","preventDefault","value","search","SEARCH","$04jNI","spinnerOn","$2nhTy","Pagination","getElementById","countPoint","totalPages","onShow","pageNumber","getNextServerData","GENRE","data","config","$bOFJ0","load","request","movie","videos","saveConfig"],"version":3,"file":"index.0a3fd851.js.map"}