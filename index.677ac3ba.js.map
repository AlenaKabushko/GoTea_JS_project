{"mappings":"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","sources":["src/index.js","src/js/fetchUriImport.js","src/js/search.js","src/js/filter.js"],"sourcesContent":["import './js/fetchUrl';\nimport './js/fetchUriImport';\n\nimport './js/firebase';\nimport './js/search';\nimport './js/select';\nimport './js/filter';\nimport './js/restore';\nimport { fillGenresFiltr } from './js/filter';\nimport './js/gallery-card-modal';\nimport { save, load } from './js/localstorage';\nimport './js/localstorage';\nimport './js/spinner';\nimport './js/modal-teem';\nimport './js/switcherTheme';\nimport './js/button-up';\nimport { Pagination } from './js/pagination';\nimport { saveConfig } from './js/restore';\n\nconst PaginationInstnce = new Pagination(\n  document.getElementById('pagination'),\n  {\n    countPoint: 5,\n    totalPages: 10,\n    onShow: paginationOnClick,\n  }\n);\n\nfunction paginationOnClick(pageNumber) {\n  requestData.page = pageNumber;\n  getNextServerData().then(movies => {\n    renderMoviesMarkup(movies);\n  });\n}\n\ngetServerData(requestTypes.GENRE)\n  .then(data => {\n    requestData.genres = data.genres;\n    fillGenresFiltr('filter-genres');\n  })\n  .then(() => {\n    let config = load('config');\n    if (config) {\n      requestData = { ...config.requestData };\n\n      PaginationInstnce.currentPage = requestData.page;\n      getNextServerData().then(movies => {\n        PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n        renderMoviesMarkup(movies);\n      });\n    } else {\n      console.log(false);\n      requestData.page = 1;\n      getServerData(requestTypes.TRENDING).then(movies => {\n        requestData.movies = movies;\n        PaginationInstnce.currentPage = 1;\n        PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n        saveConfig();\n        renderMoviesMarkup(movies);\n      });\n    }\n  });\n\nexport { PaginationInstnce };\n","import {\n  requestData,\n  requestTypes,\n  getServerData,\n  getNextServerData,\n  renderMoviesMarkup,\n} from './fetchUrl';\n","import { spinnerOn, spinnerOff } from './spinner';\nimport { fillGenresFiltr } from './filter';\nimport { PaginationInstnce } from '../index';\n\nconst searchBtn = document.querySelector('.header__form-button');\nconst searchInput = document.querySelector('.header__form-input');\nconst headerSearchError = document.querySelector('.header__text-warning');\n\nsearchBtn.addEventListener('click', onBtnSearcClick);\n\nfunction onBtnSearcClick(e) {  \n  \n  e.preventDefault();\n  if (searchInput.value !== '' && searchInput.value !== ' ') {\n    \n    requestData.search = `${searchInput.value}`;\n    requestData.page = 1;\n    getServerData(requestTypes.SEARCH).then(movies => {\n      spinnerOn();\n      PaginationInstnce.currentPage = 1;\n      PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n\n      renderMoviesMarkup(movies);\n      searchInput.value = '';\n    });\n  }\n}\n","import {\n  createCustomOneSelect,\n  setOption,\n  getOption,\n  getOptionNum,\n  createCustomMultiSelect,\n  getMultiOption,\n  setMultiOption,\n} from './select.js';\n\nimport { classGenres, classYears } from './restore';\n\nimport { PaginationInstnce } from '../index';\n\nexport function fillGenresFiltr(classSelect) {\n  const markup = markupFilterGenres();\n  const select = document.querySelector(`.custom-multi-select.${classSelect}`);\n  select.innerHTML = markup;\n  createCustomMultiSelect();\n  createCustomOneSelect();\n}\n\nfunction markupFilterGenres() {\n  let markup =\n    '<select><option value=\"Genres\">Genres</option><option value=\"None\">None</option>';\n  markup += requestData.genres\n    .map(({ id, name }) => `<option value=\"${id}\">${name}</option>`)\n    .join('');\n  markup += '</select>';\n  return markup;\n}\n\nconst filterBtnUse = document.querySelector('.filter-btn-use');\nfilterBtnUse.addEventListener('click', function (e) {\n  requestData.idxYears = getOptionNum('filter-years');\n  const filterYears = getOption('filter-years');\n  requestData.valuesGenres = getMultiOption('filter-genres');\n  requestData.page = 1;\n  requestData.discover = '';\n  if (requestData.valuesGenres.length) {\n    requestData.discover = `&with_genres=${requestData.valuesGenres}`;\n  }\n  requestData.discover += filterYears;\n  if (requestData.discover) {\n    getServerData(requestTypes.DISCOVER).then(movies => {\n      PaginationInstnce.currentPage = 1;\n      PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n      renderMoviesMarkup(movies);\n    });\n  } else {\n    getServerData(requestTypes.TRENDING).then(movies => {\n      PaginationInstnce.currentPage = 1;\n      PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n      renderMoviesMarkup(movies);\n    });\n  }\n});\n\nconst filterBtnReset = document.querySelector('.filter-btn-reset');\nfilterBtnReset.addEventListener('click', function (e) {\n  setOption(classYears, 0);\n  setMultiOption(classGenres, '');\n  requestTypes.page = 1;\n  getServerData(requestTypes.TRENDING).then(movies => {\n    PaginationInstnce.currentPage = 1;\n    PaginationInstnce.setTotalPages(Math.min(500, movies.total_pages));\n    renderMoviesMarkup(movies);\n  });\n});\n\nconst filterNavBtn = document.querySelector(\n  '.header__navigation-button-filter'\n);\nfilterNavBtn.addEventListener('click', function (e) {\n  const filterContainer = document.querySelector('.filter__container');\n  filterContainer.classList.toggle('visually-hidden');\n});\n"],"names":["$dDDEV","parcelRequire","$j1lrD","$l3CR8","$6142fea1849c7fbd$export$c2088fd8b3d8e2d2","classSelect","markup","requestData","genres","map","param","id","name","concat","join","$6142fea1849c7fbd$var$markupFilterGenres","document","querySelector","innerHTML","createCustomMultiSelect","createCustomOneSelect","addEventListener","e","idxYears","getOptionNum","filterYears","getOption","valuesGenres","getMultiOption","page","discover","length","getServerData","requestTypes","DISCOVER","then","movies","$b8f9b7833fa37166$export$3987d669b8c45b1f","currentPage","setTotalPages","Math","min","total_pages","renderMoviesMarkup","TRENDING","setOption","$gsnYQ","classYears","setMultiOption","classGenres","classList","toggle","$d35904b1c7f1c41e$var$searchBtn","$d35904b1c7f1c41e$var$searchInput","preventDefault","value","search","SEARCH","spinnerOn","$jcFG7","Pagination","getElementById","countPoint","totalPages","onShow","pageNumber","getNextServerData","GENRE","data","config","$6Sco9","load","$parcel$interopDefault","console","log","saveConfig"],"version":3,"file":"index.677ac3ba.js.map"}